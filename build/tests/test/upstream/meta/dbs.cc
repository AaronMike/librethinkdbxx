// auto-generated by yaml_to_cxx.py from test/upstream/meta/dbs.yaml
#include "testlib.h"
void test_upstream_meta_dbs() {
    enter_section("test_upstream_meta_dbs: Tests meta queries for databases");
    TEST_EQ(R::db_list().run(*conn), (bag(R::Array{"rethinkdb", "test"})));
    TEST_EQ(R::db_create("a").run(*conn), (partial(R::Object{{"dbs_created",1}})));
    TEST_EQ(R::db_create("b").run(*conn), (partial(R::Object{{"dbs_created",1}})));
    TEST_EQ(R::db_list().run(*conn), (bag(R::Array{"rethinkdb", "a", "b", "test"})));
    TEST_EQ(R::db("a").config().run(*conn), (R::Object{{"name","a"}, {"uuid","uuid()"}}));
    TEST_EQ(R::db_drop("b").run(*conn), (partial(R::Object{{"dbs_dropped",1}})));
    TEST_EQ(R::db_list().run(*conn), (bag(R::Array{"rethinkdb", "a", "test"})));
    TEST_EQ(R::db_drop("a").run(*conn), (partial(R::Object{{"dbs_dropped",1}})));
    TEST_EQ(R::db_list().run(*conn), (bag(R::Array{"rethinkdb", "test"})));
    TEST_EQ(R::db_create("bar").run(*conn), (partial(R::Object{{"dbs_created",1}})));
    TEST_EQ(R::db_create("bar").run(*conn), (err("RqlRuntimeError", "Database `bar` already exists.", R::Array{0})));
    TEST_EQ(R::db_drop("bar").run(*conn), (partial(R::Object{{"dbs_dropped",1}})));
    TEST_EQ(R::db_drop("bar").run(*conn), (err("RqlRuntimeError", "Database `bar` does not exist.", R::Array{0})));
    exit_section();
}
