// auto-generated by yaml_to_cxx.py from test/upstream/sindex/nullsinstrings.yaml
#include "testlib.h"
void test_upstream_sindex_nullsinstrings() {
    enter_section("test_upstream_sindex_nullsinstrings: sindex nulls in strings");
    temp_table tbl_table;
    R::Query tbl = tbl_table.table();
    TEST_EQ(maybe_run(tbl.index_create("key"), *conn), (R::Object{{"created", 1}}));
    TEST_EQ(maybe_run(tbl.index_wait().pluck("ready"), *conn), (R::Array{R::Object{{"ready", true}}}));
    TEST_EQ(maybe_run(tbl.insert(R::array(R::object("id", 1, "key", R::array("a", "b")), R::object("id", 2, "key", R::array(std::string("a\x00Sb", 4))))).pluck("inserted"), *conn), (R::Object{{"inserted", 2}}));
    TEST_EQ(maybe_run(tbl.get_all(R::array(std::string("a\x00Sb", 4)), R::OptArgs{{"index", R::expr("key")}}).pluck("id"), *conn), (R::Array{R::Object{{"id", 2}}}));
    TEST_EQ(maybe_run(tbl.get_all(R::array("a", "b"), R::OptArgs{{"index", R::expr("key")}}).pluck("id"), *conn), (R::Array{R::Object{{"id", 1}}}));
    exit_section();
}
