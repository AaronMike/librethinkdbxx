// auto-generated by yaml_to_cxx.py from test/upstream/regression/568.yaml
#include "testlib.h"
void test_upstream_regression_568() {
    enter_section("test_upstream_regression_568: concatmap that doesn't return stream crashes server (#568)");
    temp_table tbl_table;
    R::Query tbl = tbl_table.table();
    TEST_DO(maybe_run(tbl.insert(R::object("name", "Jim Brown")), *conn));
    TEST_EQ(maybe_run(tbl.concat_map([=](R::Var rec){ return (*rec)["name"]; }), *conn), (err("ReqlQueryLogicError", "Cannot convert STRING to SEQUENCE", R::Array{})));
    exit_section();
}
