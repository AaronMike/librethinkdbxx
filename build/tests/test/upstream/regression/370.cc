// auto-generated by yaml_to_cxx.py from test/upstream/regression/370.yaml
#include "testlib.h"
void test_upstream_regression_370() {
    enter_section("test_upstream_regression_370: Regression tests for issue #370, calling `map` after `db_list` or `table_list`");
    TEST_DO(auto d = (R::db("test")));
    TEST_DO(maybe_run(R::db("test").table_create("t370"), *conn));
    TEST_EQ(maybe_run(R::db_list().map(R::row), *conn), (R::Array{"rethinkdb", "test"}));
    TEST_EQ(maybe_run(d.table_list().map(R::row), *conn), (R::Array{"t370"}));
    TEST_DO(maybe_run(R::db("test").table_drop("t370"), *conn));
    exit_section();
}
