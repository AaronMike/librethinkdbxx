// auto-generated by yaml_to_cxx.py from test/upstream/regression/4030.yaml
#include "testlib.h"
void test_upstream_regression_4030() {
    enter_section("test_upstream_regression_4030: test that r.union is a top level function");
    temp_table tbl_table;
    R::Query tbl = tbl_table.table();
    TEST_DO(auto data = (R::Array{R::Object{{"id", 1}}, R::Object{{"id", 2}}, R::Object{{"id", 3}}, R::Object{{"id", 4}}, R::Object{{"id", 5}}, R::Object{{"id", 6}}}));
    TEST_DO(auto changes = (R::Array{R::Object{{"id", 7}}, R::Object{{"id", 8}}, R::Object{{"id", 9}}, R::Object{{"id", 10}}}));
    TEST_EQ(maybe_run(tbl.insert(data), *conn), (partial(R::Object{{"errors", 0}, {"inserted", 6}})));
    TEST_EQ(maybe_run(tbl.count(), *conn), (6));
    TEST_EQ(maybe_run(tbl.union_(tbl), *conn), (bag(data * 2)));
    TEST_EQ(maybe_run(R::union_(tbl, tbl), *conn), (bag(data * 2)));
    exit_section();
}
