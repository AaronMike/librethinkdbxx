// auto-generated by yaml_to_cxx.py from test/upstream/regression/545.yaml
#include "testlib.h"
void test_upstream_regression_545() {
    enter_section("test_upstream_regression_545: r.js inside reduce crashes server (#545)");
    temp_table tbl_table;
    R::Query tbl = tbl_table.table();
    TEST_DO(maybe_run(tbl.insert(R::array(R::object("id", 0), R::object("id", 1), R::object("id", 2))), *conn));
    TEST_EQ(maybe_run(tbl.reduce(R::js("(function(x,y){return 1;})")), *conn), (1));
    TEST_EQ(maybe_run(tbl.reduce(R::js("(function(x,y){return {id:x[\"id\"] + y[\"id\"]};})")), *conn), (R::Object{{"id", 3}}));
    exit_section();
}
