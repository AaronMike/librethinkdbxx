// auto-generated by yaml_to_cxx.py from test/upstream/regression/309.yaml
#include "testlib.h"
void test_upstream_regression_309() {
    enter_section("test_upstream_regression_309: Regression tests for issue #309, using 'union' on an array and a stream doesn't seem to work");
    temp_table t_table;
    R::Query t = t_table.table();
    TEST_DO(maybe_run(t.insert(R::array(R::object("id", 0), R::object("id", 1))), *conn));
    TEST_EQ(maybe_run(t.union_(R::array(2, 3, 4)), *conn), (bag(R::Array{R::Object{{"id", 0}}, R::Object{{"id", 1}}, 2, 3, 4})));
    TEST_EQ(maybe_run(R::expr(R::array(2, 3, 4)).union_(t), *conn), (bag(R::Array{R::Object{{"id", 0}}, R::Object{{"id", 1}}, 2, 3, 4})));
    exit_section();
}
